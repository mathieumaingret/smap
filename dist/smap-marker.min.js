!function(s){"use strict";s.SMapMarker=function(o,t){return this.elements={},this.options={},this.marker=void 0,this.icon=void 0,this.iconInterface=t,this.popup=void 0,s.extend(!0,this.options,s.SMapMarker.defaults,o),this.prepareOptions()&&this.init(),this},s.SMapMarker.defaults={position:void 0,customIcon:!0,icon:{html:void 0,data:{id:void 0},iconSize:[50,50],popupAnchor:[0,-20]},popup:void 0,showPopup:!1,centerOnFocus:!0,sourceContainer:void 0,classes:{prefix:"marker",marker:"{prefix}--default",popup:"{prefix}-popup",focused:"is-focused",active:"is-active"}},s.SMapMarker.prototype={prepareOptions:function(){var i=this;return"undefined"==typeof L?(i.setLog("error",'"L" function from Leaflet is undefined'),!1):void 0===i.options.position||"object"!=typeof i.options.position?(i.setLog("error","Missing required position parameter as array"),!1):(s.each(i.options.classes,function(o,t){"string"==typeof t&&(i.options.classes[o]=t.replace(/{prefix}/,i.options.classes.prefix)),i.options.icon.className=i.options.classes.prefix+" "+i.options.classes.marker}),!0)},init:function(){var o={};!0===this.options.customIcon&&(this.icon=new this.iconInterface(this.options.icon),o.icon=this.icon),this.marker=L.marker(this.options.position,o),!0===this.options.customIcon&&void 0!==this.options.icon.html&&this.getContainer().html(this.options.icon.html),this.managePopup()},managePopup:function(){var o=this;if(void 0!==o.options.popup){"object"==typeof o.options.popup&&o.options.popup.html();var t=s("<div>",{class:o.options.classes.popup,html:o.options.popup});o.popup=o.leaflet().bindPopup(t.prop("outerHTML"))}},handleInteractions:function(){var o=this;!0===o.options.showPopup&&o.leaflet().openPopup(),this.leaflet().on({click:function(){!0===o.options.centerOnFocus&&o.map().setView(o.leaflet().getLatLng())},mouseover:function(){o.getContainer().addClass(o.options.classes.focused)},mouseout:function(){o.getContainer().removeClass(o.options.classes.focused)},popupopen:function(){o.getContainer().addClass(o.options.classes.active),void 0!==o.options.sourceContainer&&o.options.sourceContainer.addClass(o.options.classes.active)},popupclose:function(){o.getContainer().removeClass(o.options.classes.active),void 0!==o.options.sourceContainer&&o.options.sourceContainer.removeClass(o.options.classes.active)}}),void 0!==o.options.sourceContainer&&o.options.sourceContainer.on("click",null,function(){o.leaflet().openPopup()})},getPosition:function(){return this.options.position},getLatLng:function(){return this.leaflet().getLatLng()},getContainer:function(){return s(this.leaflet()._icon)},setLog:function(o,t){console[o]("SMapMarker : "+t)},leaflet:function(){return this.marker},map:function(){return this.leaflet()._map}}}(jQuery);